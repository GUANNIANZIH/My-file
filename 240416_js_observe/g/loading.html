<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!-- js 搭配 css 的淡入效果 -->
    <style>
        body{
            margin: 0;  
            /* 將寬度和高度設為視口的寬度和高度，使其充滿整個屏幕 */
            /* vw: 表示相對於視窗的寬度的百分比，即1vw等於視窗寬度的1% */
            /* vh: 表示相對於視窗的高度的百分比，即1vh等於視窗高度的1% */
            /* width: 100vw; 表示元素的寬度將被設置為視窗寬度的100%，而 height: 100vh; 表示元素的高度將被設置為視窗高度的100%。這樣設置可以使元素充滿整個視窗，從而實現全屏的效果 */
            width: 100vw;
            height: 100vh;
            /* 設置了overflow為hidden，以防止滾動 */
            overflow: hidden;       
        }
        #loading{
            /* 設置了載入效果的容器的樣式，使其寬度和高度與視口相同，並且設置了固定定位（fixed），使其固定在視口的左上角，背景顏色為灰色。 */
            width: 100vw;
            height: 100vh;
            position: fixed;
            /* display: table-cell; */
            display: table;
            vertical-align: middle;
            background-color: gray;
            transition: opacity 1s;
            /* 忽略任何事件的點擊事件 */
            /* pointer-events: none; */
        }
        #loading-content{
            display: table-cell;
            vertical-align: middle;
            text-align: center;
        }
        #loading-icon {
        width: 100px;
        animation: rotate 2s infinite;
        }
        #loading-icon path {
        fill: white;
        }
        @keyframes rotate {
        from {
            transform: rotate(0deg)
        }
        to {
            transform: rotate(360deg);
        }
        }
    </style>
</head>
<body>
    <div id="loading">
        <div id="loading-content">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="loading-icon">
                <path d="M304 48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zm0 416a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM48 304a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm464-48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM142.9 437A48 48 0 1 0 75 369.1 48 48 0 1 0 142.9 437zm0-294.2A48 48 0 1 0 75 75a48 48 0 1 0 67.9 67.9zM369.1 437A48 48 0 1 0 437 369.1 48 48 0 1 0 369.1 437z"/>
            </svg>
            <!-- h1 裡面放 span 行內 -->
            <h1>
                載入中...
                <span id="loading-progress">0</span>%
              </h1>
        </div>
    </div>

    <div id="content">
        <img src="https://picsum.photos/1000/1000/?random=1">
        <img src="https://picsum.photos/1000/1000/?random=2">
        <img src="https://picsum.photos/1000/1000/?random=3">
        <img src="https://picsum.photos/1000/1000/?random=4">
        <img src="https://picsum.photos/1000/1000/?random=5">
    </div>
    <script>
        const loading = document.getElementById('loading')
        const loadingProgress = document.getElementById('loading-pogress')
        const images = document.getElementById('img')

        // 進度條
        let loaded = 0
        for(const el of images){
            el.addEventListener('load', () => {
                loaded++
                loadingProgress.innerText = Math.round(loaded / images.length * 100)
            })
        }

        // document.onreadystatechange
        document.addEventListener('readystatechange', () => {
            console.log(document.readyState)
        })

        // window.onload = () => {}
        window.addEventListener('load', () => {
            console.log('window load')
            loading.style.opacity = 0
            document.body.style.overflow = "auto"
            // 
            setTimeout(() => {
                loading.style.display = 'none'
            },1000)
        })
    </script>
    
</body>
</html>